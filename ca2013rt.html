<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Companies Act 2013 Reference Tool</title>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXX"
     crossorigin="anonymous"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .disclaimer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .disclaimer h3 {
            color: #764ba2;
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .disclaimer p {
            color: #555;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .disclaimer p:last-child {
            margin-bottom: 0;
        }

        .disclaimer strong {
            color: #333;
        }

        .disclaimer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .disclaimer a:hover {
            text-decoration: underline;
        }

        .disclaimer-icon {
            font-size: 1.2rem;
        }

        .ad-container {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ad-label {
            font-size: 0.75rem;
            color: #999;
            text-transform: uppercase;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        .sidebar-ad {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .banner-ad {
            margin: 20px 0;
        }

        @media (min-width: 1024px) {
            .main-layout {
                display: grid;
                grid-template-columns: 1fr 300px;
                gap: 20px;
                align-items: start;
            }
        }

        .main-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .chat-container {
            height: 600px;
            display: flex;
            flex-direction: column;
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            display: flex;
            justify-content: flex-end;
        }

        .message.assistant {
            display: flex;
            justify-content: flex-start;
        }

        .message-content {
            max-width: 75%;
            padding: 16px 20px;
            border-radius: 12px;
            line-height: 1.6;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.assistant .message-content {
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
            border-bottom-left-radius: 4px;
        }

        .message-content h3 {
            margin-top: 15px;
            margin-bottom: 8px;
            color: #667eea;
            font-size: 1.1rem;
        }

        .message.user .message-content h3 {
            color: white;
        }

        .message-content p {
            margin-bottom: 10px;
        }

        .message-content ul, .message-content ol {
            margin-left: 20px;
            margin-bottom: 10px;
        }

        .message-content li {
            margin-bottom: 5px;
        }

        .message-content strong {
            color: #764ba2;
        }

        .message.user .message-content strong {
            color: white;
            font-weight: 600;
        }

        .citation {
            font-size: 0.85rem;
            color: #666;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e0e0e0;
        }

        .citation a {
            color: #667eea;
            text-decoration: none;
        }

        .citation a:hover {
            text-decoration: underline;
        }

        .input-area {
            padding: 20px 30px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .input-wrapper {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .input-wrapper input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-wrapper input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-wrapper button {
            padding: 14px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .input-wrapper button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .input-wrapper button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .quick-queries {
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }

        .quick-queries h3 {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .query-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .query-btn {
            padding: 8px 16px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .query-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .loading {
            display: flex;
            gap: 5px;
            padding: 20px;
            justify-content: center;
        }

        .loading span {
            width: 10px;
            height: 10px;
            background: #667eea;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .loading span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        .error {
            background: #fee;
            color: #c33;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .export-controls {
            padding: 15px 30px;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: flex-end;
        }

        .export-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .export-btn svg {
            width: 16px;
            height: 16px;
        }

        .print-only {
            display: none;
        }

        @media print {
            .print-only {
                display: block;
            }
        }

        /* Footer Styles */
        .app-footer {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 30px;
            margin-top: 20px;
        }

        .footer-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .footer-links a {
            color: #667eea;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .footer-links a:hover {
            color: #764ba2;
            transform: translateY(-2px);
        }

        .footer-links a svg {
            width: 16px;
            height: 16px;
        }

        .footer-social {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-icon:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .social-icon svg {
            width: 20px;
            height: 20px;
        }

        .footer-copyright {
            text-align: center;
            color: #666;
            font-size: 0.85rem;
            padding-top: 15px;
        }

        .footer-copyright strong {
            color: #667eea;
        }

        @media print {
            .app-footer {
                display: none !important;
            }
        }

        @media (max-width: 768px) {
            .footer-links {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }

            .app-footer {
                padding: 20px;
            }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease;
            position: relative;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #667eea;
        }

        .modal-header h2 {
            color: #667eea;
            font-size: 1.5rem;
            margin: 0;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: #f0f0f0;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #e0e0e0;
            transform: rotate(90deg);
        }

        .modal-body {
            color: #333;
            line-height: 1.6;
        }

        .modal-body h3 {
            color: #764ba2;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .modal-body ul {
            margin-left: 20px;
        }

        .modal-body a {
            color: #667eea;
            text-decoration: none;
        }

        .modal-body a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .chat-container {
                height: 500px;
            }

            .message-content {
                max-width: 85%;
            }

            .query-buttons {
                flex-direction: column;
            }

            .banner-ad .ad-container ins {
                width: 320px !important;
                height: 100px !important;
            }

            .sidebar-ads {
                display: none !important;
            }
        }

        /* Print Styles for PDF Generation */
        @media print {
            /* Hide unnecessary elements */
            body {
                background: white;
                padding: 0;
                margin: 0;
            }

            .header,
            .disclaimer,
            .banner-ad,
            .sidebar-ads,
            .ad-container,
            .input-area,
            .quick-queries,
            .export-button {
                display: none !important;
            }

            .container {
                max-width: 100%;
                padding: 0;
            }

            .main-card {
                box-shadow: none;
                border-radius: 0;
                margin: 0;
                padding: 0;
            }

            .chat-container {
                height: auto;
                display: block;
            }

            .messages {
                padding: 20mm;
                background: white;
            }

            /* Page breaks */
            .message {
                page-break-inside: avoid;
                margin-bottom: 15px;
            }

            .message-content {
                max-width: 100%;
                border: 1px solid #ddd;
                padding: 15px;
                border-radius: 8px;
                background: white !important;
                color: #000 !important;
            }

            .message.user .message-content {
                background: #f5f5f5 !important;
                border-left: 4px solid #667eea;
            }

            .message.assistant .message-content {
                background: white !important;
                border-left: 4px solid #764ba2;
            }

            /* Typography */
            .message-content h3 {
                color: #000 !important;
                font-size: 14pt;
                margin-top: 10px;
            }

            .message-content p,
            .message-content li {
                color: #000 !important;
                font-size: 11pt;
                line-height: 1.5;
            }

            .message-content strong {
                color: #000 !important;
                font-weight: bold;
            }

            /* Citations */
            .citation {
                border-top: 1px solid #ddd;
                padding-top: 8px;
                margin-top: 8px;
                font-size: 9pt;
                color: #666 !important;
            }

            /* Header and Footer */
            @page {
                margin: 20mm;
                
                @top-center {
                    content: "Companies Act 2013 Reference Tool - Query & Response";
                    font-size: 10pt;
                    color: #666;
                }

                @bottom-right {
                    content: "Page " counter(page) " of " counter(pages);
                    font-size: 9pt;
                    color: #666;
                }

                @bottom-left {
                    content: "Generated: " attr(data-print-date);
                    font-size: 9pt;
                    color: #666;
                }
            }

            /* Print metadata */
            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 20px;
                padding-bottom: 15px;
                border-bottom: 2px solid #667eea;
            }

            .print-header h1 {
                font-size: 18pt;
                color: #000;
                margin: 0 0 5px 0;
            }

            .print-header p {
                font-size: 10pt;
                color: #666;
                margin: 0;
            }

            .print-footer {
                display: block !important;
                margin-top: 30px;
                padding-top: 15px;
                border-top: 2px solid #667eea;
                font-size: 9pt;
                color: #666;
                page-break-inside: avoid;
            }

            /* Links */
            a {
                color: #000 !important;
                text-decoration: none;
            }

            a[href]:after {
                content: " (" attr(href) ")";
                font-size: 9pt;
                color: #666;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèõÔ∏è Companies Act 2013 Reference Tool</h1>
            <p>Ask questions about the Companies Act 2013 and rules made thereunder ‚Ä¢ Powered by ca2013.com</p>
        </div>

        <div class="disclaimer">
            <h3><span class="disclaimer-icon">‚öñÔ∏è</span> Legal Disclaimer</h3>
            <p><strong>Not Legal Advice:</strong> This tool is for informational purposes only and does not constitute legal advice. The information provided should not be relied upon as a substitute for professional legal counsel. Always consult with a qualified legal professional for specific legal matters.</p>
            
            <p><strong>Third-Party Content:</strong> This application uses web search to access content from <a href="https://ca2013.com/" target="_blank" rel="noopener noreferrer">ca2013.com</a>, a third-party website. We are not affiliated with, endorsed by, or connected to ca2013.com. All content retrieved from ca2013.com remains the property of its respective owners.</p>
            
            <p><strong>Accuracy:</strong> While we strive to provide accurate information, laws and regulations change frequently. We make no warranties or guarantees about the accuracy, completeness, or timeliness of the information provided. Users should verify all information independently.</p>
            
            <p><strong>Limitation of Liability:</strong> The creators and operators of this tool shall not be liable for any decisions made based on information provided herein.</p>
        </div>

        <!-- Top Banner Ad -->
        <div class="banner-ad">
            <div class="ad-container">
                <div>
                    <div class="ad-label">Advertisement</div>
                    <!-- Google AdSense Banner Ad (728x90) -->
                    <ins class="adsbygoogle"
                         style="display:inline-block;width:728px;height:90px"
                         data-ad-client="ca-pub-XXXXXXXXXX"
                         data-ad-slot="YYYYYYYYYY"></ins>
                </div>
            </div>
        </div>

        <div class="main-layout">
            <div class="main-card">
                <div class="export-controls">
                    <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                        <label for="modelSelect" style="font-weight: 600; color: #667eea;">AI Model:</label>
                        <select id="modelSelect" style="padding: 8px 15px; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 0.9rem; cursor: pointer; transition: all 0.3s;">
                            <option value="claude">Claude Sonnet 4 (Best Quality)</option>
                            <option value="deepseek" selected>DeepSeek-V3 (Best Value) üí∞</option>
                            <option value="gemini">Gemini 2.0 Flash (Fastest) ‚ö°</option>
                            <option value="qwen">Qwen-Max (Balanced)</option>
                            <option value="gpt4">GPT-4o (Industry Standard)</option>
                        </select>
                    </div>
                    <button class="export-btn" id="printBtn" title="Print conversation">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
                        </svg>
                        Print
                    </button>
                    <button class="export-btn" id="pdfBtn" title="Save as PDF">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                        Save PDF
                    </button>
                    <button class="export-btn" id="clearBtn" title="Clear conversation" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                        Clear
                    </button>
                </div>
                
            <div class="chat-container">
                <div class="messages" id="messages">
                    <!-- Print Header (only visible when printing) -->
                    <div class="print-only print-header">
                        <h1>üèõÔ∏è Companies Act 2013 Reference Tool</h1>
                        <p>Query & Response Report</p>
                        <p id="printDate"></p>
                    </div>

                    <div class="message assistant">
                        <div class="message-content">
                            <p><strong>Welcome to the Companies Act 2013 Reference Tool!</strong></p>
                            <p>I am "The Statutory Analyst" - your Statutory Interpretation Engine.</p>
                            
                            <p><strong>My Analytical Framework:</strong></p>
                            <ul>
                                <li>üìú <strong>Textual Supremacy</strong> - Literal interpretation with full Provisos & Explanations</li>
                                <li>‚öñÔ∏è <strong>Mandatory vs Directory</strong> - Distinguishing "Shall" (mandatory) from "May" (discretionary)</li>
                                <li>üîó <strong>Inter-connectivity</strong> - Cross-referencing Sections, Rules, and Notifications</li>
                                <li>‚úÖ <strong>Compliance Triggers</strong> - Exact thresholds and applicability conditions</li>
                                <li>üéØ <strong>Non-Obstante Analysis</strong> - Identifying overriding provisions</li>
                            </ul>

                            <p><strong>Output Structure for Every Query:</strong></p>
                            <ul>
                                <li>üìú Statutory Provision (exact text)</li>
                                <li>‚öñÔ∏è The Core Rule (plain English)</li>
                                <li>‚ö†Ô∏è The "Unless" Factor (all exceptions)</li>
                                <li>üîó Inter-connectivity (related provisions)</li>
                                <li>‚úÖ Compliance Trigger (thresholds & timelines)</li>
                            </ul>
                            
                            <p><strong>Important:</strong> This tool searches <a href="https://ca2013.com/" target="_blank" style="color: #667eea;">ca2013.com</a> (a third-party website) for statutory content. I provide statutory interpretation, NOT legal advice. Always consult a qualified legal professional for specific matters.</p>
                            
                            <p>Ask me about any provision of the Companies Act 2013 and rules made thereunder!</p>
                        </div>
                    </div>

                    <!-- Print Footer (only visible when printing) -->
                    <div class="print-only print-footer">
                        <p><strong>‚öñÔ∏è Legal Disclaimer:</strong></p>
                        <p>This document is for informational purposes only and does NOT constitute legal advice. The information provided should not be relied upon as a substitute for professional legal counsel. Always consult with a qualified legal professional for specific legal matters.</p>
                        <p><strong>Third-Party Content:</strong> Information sourced from ca2013.com (third-party website). Not affiliated with or endorsed by ca2013.com.</p>
                        <p><strong>Accuracy:</strong> Laws and regulations change frequently. Verify all information independently before relying on it.</p>
                    </div>
                </div>

                <div class="input-area">
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="userInput" 
                            placeholder="Ask about CA2013 sections, compliance, rules..."
                            autocomplete="off"
                        />
                        <button id="sendBtn">Send</button>
                    </div>
                </div>

                <div class="quick-queries">
                    <h3>Quick Queries</h3>
                    <div class="query-buttons">
                        <button class="query-btn" data-query="Analyze Section 135 on CSR - provide statutory text, core rule, provisos, and compliance trigger">Section 135 - CSR Analysis</button>
                        <button class="query-btn" data-query="Interpret Section 90 on beneficial ownership - include deeming fictions and mandatory requirements">Section 90 - Beneficial Ownership</button>
                        <button class="query-btn" data-query="Explain Section 188 on related party transactions - cover all provisos and inter-connectivity with Rules">Section 188 - RPT</button>
                        <button class="query-btn" data-query="What are the board composition requirements under Sections 149, 150, 151 and applicable Rules?">Board Composition Rules</button>
                        <button class="query-btn" data-query="Identify all 2024-2025 amendments to Companies Act 2013 with notification numbers and dates">Latest Amendments 2024-25</button>
                        <button class="query-btn" data-query="Explain the non-obstante clause in Section 230 and which provisions it overrides">Non-Obstante Analysis</button>
                    </div>
                </div>
            </div>
        </div>

            <!-- Sidebar Ads (Desktop only) -->
            <aside class="sidebar-ads" style="display: none;">
                <!-- Sidebar Ad 1 -->
                <div class="sidebar-ad">
                    <div class="ad-label">Advertisement</div>
                    <div class="ad-container">
                        <!-- Google AdSense Sidebar Ad (300x250) -->
                        <ins class="adsbygoogle"
                             style="display:inline-block;width:300px;height:250px"
                             data-ad-client="ca-pub-XXXXXXXXXX"
                             data-ad-slot="ZZZZZZZZZZ"></ins>
                    </div>
                </div>

                <!-- Sidebar Ad 2 -->
                <div class="sidebar-ad">
                    <div class="ad-label">Advertisement</div>
                    <div class="ad-container">
                        <!-- Google AdSense Sidebar Ad (300x250) -->
                        <ins class="adsbygoogle"
                             style="display:inline-block;width:300px;height:250px"
                             data-ad-client="ca-pub-XXXXXXXXXX"
                             data-ad-slot="AAAAAAAAAA"></ins>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Bottom Banner Ad -->
        <div class="banner-ad" style="margin-top: 20px;">
            <div class="ad-container">
                <div>
                    <div class="ad-label">Advertisement</div>
                    <!-- Google AdSense Bottom Banner Ad (728x90) -->
                    <ins class="adsbygoogle"
                         style="display:inline-block;width:728px;height:90px"
                         data-ad-client="ca-pub-XXXXXXXXXX"
                         data-ad-slot="BBBBBBBBBB"></ins>
                </div>
            </div>
        </div>

        <!-- App Footer -->
        <footer class="app-footer">
            <!-- Footer Links -->
            <div class="footer-links">
                <a href="#features" title="Features & Help">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Features / Help
                </a>
                <a href="#news" title="Latest News">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
                    </svg>
                    News
                </a>
                <a href="#faq" title="Frequently Asked Questions">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    FAQ
                </a>
                <a href="#feedback" title="Send Feedback">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
                    </svg>
                    Feedback
                </a>
                <a href="#support" title="Support This Project">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                    </svg>
                    Support Project
                </a>
                <a href="#privacy" title="Data Protection & Security">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                    </svg>
                    Data Protection / Security
                </a>
                <a href="#disclaimer" title="Legal Disclaimer">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    Disclaimer
                </a>
            </div>

            <!-- Social Media Links -->
            <div class="footer-social">
                <a href="https://twitter.com/yourhandle" class="social-icon" title="Twitter" target="_blank" rel="noopener">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                    </svg>
                </a>
                <a href="https://linkedin.com/company/yourcompany" class="social-icon" title="LinkedIn" target="_blank" rel="noopener">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
                <a href="https://facebook.com/yourpage" class="social-icon" title="Facebook" target="_blank" rel="noopener">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                </a>
                <a href="https://github.com/yourrepo" class="social-icon" title="GitHub" target="_blank" rel="noopener">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                    </svg>
                </a>
                <a href="mailto:contact@yourwebsite.com" class="social-icon" title="Email" target="_blank" rel="noopener">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                </a>
            </div>

            <!-- Copyright -->
            <div class="footer-copyright">
                <p>Copyright ¬© <strong>CA2013.ai</strong>, 2024-2026. All rights reserved.</p>
                <p style="margin-top: 8px; font-size: 0.8rem;">
                    Powered by AI | Content sourced from <a href="https://ca2013.com" target="_blank" style="color: #667eea;">ca2013.com</a> | 
                    Not affiliated with MCA or Government of India
                </p>
            </div>
        </footer>
    </div>

    <!-- Modals -->
    <div id="featuresModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Features & Help</h2>
                <button class="modal-close" onclick="closeModal('featuresModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <h3>üåü Key Features</h3>
                <ul>
                    <li><strong>AI-Powered Analysis:</strong> Get expert statutory interpretation using advanced AI</li>
                    <li><strong>5 AI Models:</strong> Choose from Claude, DeepSeek, Gemini, Qwen, or GPT-4</li>
                    <li><strong>Structured Output:</strong> Every response includes statutory text, core rule, exceptions, and compliance triggers</li>
                    <li><strong>PDF Export:</strong> Save your queries and responses as professional PDFs</li>
                    <li><strong>Web Search:</strong> Searches ca2013.com for latest provisions and amendments</li>
                    <li><strong>Mobile Responsive:</strong> Works perfectly on all devices</li>
                </ul>
                
                <h3>üí° How to Use</h3>
                <ol>
                    <li>Type your question or use Quick Query buttons</li>
                    <li>Select your preferred AI model (DeepSeek recommended for best value)</li>
                    <li>Review the structured statutory analysis</li>
                    <li>Export to PDF if needed for your records</li>
                    <li>Clear conversation to start fresh on a new topic</li>
                </ol>

                <h3>üìñ Example Queries</h3>
                <ul>
                    <li>"Analyze Section 135 on Corporate Social Responsibility"</li>
                    <li>"What are the board composition requirements for listed companies?"</li>
                    <li>"Explain Section 188 on related party transactions"</li>
                    <li>"Latest amendments to Companies Act in 2024-2025"</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="newsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Latest News</h2>
                <button class="modal-close" onclick="closeModal('newsModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <h3>üÜï Recent Updates</h3>
                <p><strong>February 2026:</strong></p>
                <ul>
                    <li>Multi-model AI support added (5 providers)</li>
                    <li>Client-side PDF export feature launched</li>
                    <li>Enhanced statutory analysis with color-coded terms</li>
                    <li>Mobile optimization completed</li>
                </ul>
                
                <p><strong>Coming Soon:</strong></p>
                <ul>
                    <li>User accounts and conversation history</li>
                    <li>Coverage of LLP Act and SEBI regulations</li>
                    <li>Case law database integration</li>
                    <li>Mobile app (iOS & Android)</li>
                </ul>

                <h3>üì¢ Important Notices</h3>
                <p>This tool provides statutory interpretation for educational purposes only. Always consult qualified legal professionals for specific compliance matters.</p>
            </div>
        </div>
    </div>

    <div id="faqModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Frequently Asked Questions</h2>
                <button class="modal-close" onclick="closeModal('faqModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <h3>Q: Is this legal advice?</h3>
                <p><strong>A:</strong> No. This tool provides statutory interpretation for educational and informational purposes only. Always consult qualified legal professionals for specific legal matters.</p>

                <h3>Q: Which AI model should I use?</h3>
                <p><strong>A:</strong> We recommend DeepSeek for best value (92% cheaper than Claude) with excellent quality. Use Claude Sonnet 4 for premium quality, or Gemini 2.0 Flash for fastest responses.</p>

                <h3>Q: How do I export my conversation?</h3>
                <p><strong>A:</strong> Click the "Save PDF" or "Print" button at the top of the chat. Your browser will open a print dialog where you can save as PDF.</p>

                <h3>Q: Where does the information come from?</h3>
                <p><strong>A:</strong> We search ca2013.com (a third-party website) for statutory content. All sources are cited in responses.</p>

                <h3>Q: Is my data secure?</h3>
                <p><strong>A:</strong> Yes. Conversations are not stored or logged. PDF generation happens entirely in your browser. We don't track or save your queries.</p>

                <h3>Q: Can I use this for compliance?</h3>
                <p><strong>A:</strong> This tool helps with research and understanding, but final compliance decisions should be made with qualified professionals.</p>

                <h3>Q: What about amendments?</h3>
                <p><strong>A:</strong> We search for the latest provisions and amendments. However, always verify with official government sources for critical compliance work.</p>
            </div>
        </div>
    </div>

    <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Send Feedback</h2>
                <button class="modal-close" onclick="closeModal('feedbackModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <h3>üí¨ We'd Love to Hear From You!</h3>
                <p>Your feedback helps us improve this tool for the entire legal community.</p>

                <h3>üìß Contact Methods</h3>
                <ul>
                    <li><strong>Email:</strong> <a href="mailto:feedback@yourwebsite.com">feedback@yourwebsite.com</a></li>
                    <li><strong>Twitter:</strong> <a href="https://twitter.com/yourhandle" target="_blank">@yourhandle</a></li>
                    <li><strong>LinkedIn:</strong> <a href="https://linkedin.com/company/yourcompany" target="_blank">Connect with us</a></li>
                </ul>

                <h3>üêõ Found a Bug?</h3>
                <p>Please include:</p>
                <ul>
                    <li>Browser and version (Chrome, Firefox, Safari, etc.)</li>
                    <li>Device (Desktop, Mobile, Tablet)</li>
                    <li>Steps to reproduce the issue</li>
                    <li>Screenshot if possible</li>
                </ul>

                <h3>üí° Feature Requests</h3>
                <p>Have an idea to make this tool better? We're listening! Tell us what features you'd like to see.</p>
            </div>
        </div>
    </div>

    <div id="supportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Support This Project</h2>
                <button class="modal-close" onclick="closeModal('supportModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <h3>‚ù§Ô∏è Help Us Keep This Free</h3>
                <p>This tool is free for everyone and powered by your support!</p>

                <h3>üí∞ Ways to Support</h3>
                <ul>
                    <li><strong>Share:</strong> Tell colleagues and classmates about this tool</li>
                    <li><strong>Follow:</strong> Connect with us on social media</li>
                    <li><strong>Review:</strong> Leave a testimonial or review</li>
                    <li><strong>Contribute:</strong> Share feedback and improvement ideas</li>
                    <li><strong>Donate:</strong> Support server costs (coming soon)</li>
                </ul>

                <h3>üåü Premium Features (Coming Soon)</h3>
                <p>Support development by subscribing to premium features:</p>
                <ul>
                    <li>Ad-free experience</li>
                    <li>Conversation history saving</li>
                    <li>Priority Claude Sonnet 4 access</li>
                    <li>Advanced export options</li>
                    <li>Email support</li>
                </ul>
                <p><strong>Expected Price:</strong> ‚Çπ499/month or ‚Çπ4,999/year</p>

                <h3>üéì For Educational Institutions</h3>
                <p>Special discounts available for law schools, CA institutes, and CS colleges. Contact us for bulk licensing.</p>
            </div>
        </div>
    </div>

    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Data Protection & Security</h2>
                <button class="modal-close" onclick="closeModal('privacyModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <h3>üîí Your Privacy Matters</h3>
                <p>We take your privacy and data security seriously.</p>

                <h3>‚úÖ What We DO</h3>
                <ul>
                    <li>Process conversations in real-time</li>
                    <li>Generate PDFs entirely in your browser (client-side)</li>
                    <li>Use HTTPS encryption for all communications</li>
                    <li>Comply with GDPR and data protection regulations</li>
                    <li>Collect anonymous analytics (page views, basic usage stats)</li>
                </ul>

                <h3>‚ùå What We DON'T DO</h3>
                <ul>
                    <li>Store your conversations on our servers</li>
                    <li>Log your queries or responses</li>
                    <li>Track personal information</li>
                    <li>Sell your data to third parties</li>
                    <li>Share information with law enforcement (nothing to share!)</li>
                </ul>

                <h3>üõ°Ô∏è Security Measures</h3>
                <ul>
                    <li><strong>Encryption:</strong> All data in transit is encrypted via HTTPS</li>
                    <li><strong>No Storage:</strong> Conversations are ephemeral and not stored</li>
                    <li><strong>Client-Side Processing:</strong> PDFs generated in your browser</li>
                    <li><strong>Third-Party APIs:</strong> We use reputable AI providers with their own security</li>
                </ul>

                <h3>üç™ Cookies & Tracking</h3>
                <p>We use minimal cookies for:</p>
                <ul>
                    <li>Session management (selected AI model preference)</li>
                    <li>Anonymous analytics (Google Analytics)</li>
                    <li>Ad serving (Google AdSense)</li>
                </ul>

                <h3>üìß Contact for Privacy Concerns</h3>
                <p>Email: <a href="mailto:privacy@yourwebsite.com">privacy@yourwebsite.com</a></p>
            </div>
        </div>
    </div>

    <div id="disclaimerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Legal Disclaimer</h2>
                <button class="modal-close" onclick="closeModal('disclaimerModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <h3>‚öñÔ∏è Important Legal Information</h3>
                
                <h3>‚ùå NOT Legal Advice</h3>
                <p>This tool is for <strong>informational and educational purposes only</strong> and does NOT constitute legal advice. The information provided should not be relied upon as a substitute for professional legal counsel. Always consult with a qualified legal professional for specific legal matters.</p>

                <h3>üîó Third-Party Content</h3>
                <p>This application uses web search to access content from <a href="https://ca2013.com/" target="_blank">ca2013.com</a>, a third-party website. We are <strong>not affiliated with, endorsed by, or connected to ca2013.com</strong>. All content retrieved from ca2013.com remains the property of its respective owners.</p>

                <h3>‚ö†Ô∏è Accuracy & Completeness</h3>
                <p>While we strive to provide accurate information, <strong>laws and regulations change frequently</strong>. We make no warranties or guarantees about the accuracy, completeness, or timeliness of the information provided. Users should verify all information independently before relying on it.</p>

                <h3>üö´ Limitation of Liability</h3>
                <p>The creators and operators of this tool shall not be liable for any decisions made based on information provided herein. Use of this tool is at your own risk.</p>

                <h3>üèõÔ∏è Not Government Affiliated</h3>
                <p>This tool is NOT affiliated with:</p>
                <ul>
                    <li>Ministry of Corporate Affairs (MCA)</li>
                    <li>Government of India</li>
                    <li>Any regulatory authority</li>
                    <li>Any bar council or legal body</li>
                </ul>

                <h3>ü§ñ AI-Generated Content</h3>
                <p>Responses are generated by artificial intelligence and may contain errors. Always verify AI-generated content with official sources and qualified professionals.</p>

                <h3>üìã No Attorney-Client Relationship</h3>
                <p>Use of this tool does not create an attorney-client relationship between you and the operators of this service.</p>

                <h3>üîÑ Changes to Disclaimer</h3>
                <p>We reserve the right to update this disclaimer at any time. Continued use of the tool constitutes acceptance of any changes.</p>

                <p><strong>Last Updated:</strong> February 16, 2026</p>
            </div>
        </div>
    </div>

    <script>
        // Initialize AdSense ads
        (adsbygoogle = window.adsbygoogle || []).push({});
        (adsbygoogle = window.adsbygoogle || []).push({});
        (adsbygoogle = window.adsbygoogle || []).push({});
        (adsbygoogle = window.adsbygoogle || []).push({});
        
        // Show sidebar ads on desktop
        if (window.innerWidth >= 1024) {
            document.querySelector('.sidebar-ads').style.display = 'block';
        }
    </script>
    
    <script>
        // ============================================
        // MULTI-MODEL CONFIGURATION
        // ============================================
        
        // Configuration for different LLM providers
        const MODEL_CONFIGS = {
            claude: {
                endpoint: 'https://api.anthropic.com/v1/messages',
                headers: { 'Content-Type': 'application/json' },
                format: 'anthropic',
                model: 'claude-sonnet-4-20250514',
                apiKey: '', // Auto-handled in claude.ai environment
                description: 'Best quality, excellent for legal analysis'
            },
            deepseek: {
                endpoint: 'https://api.deepseek.com/v1/chat/completions',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer YOUR_DEEPSEEK_API_KEY' // Replace with your key
                },
                format: 'openai',
                model: 'deepseek-chat',
                description: '92% cheaper, excellent reasoning'
            },
            gemini: {
                endpoint: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent',
                apiKey: 'YOUR_GEMINI_API_KEY', // Replace with your key
                format: 'gemini',
                model: 'gemini-2.0-flash-exp',
                description: '98% cheaper, blazing fast'
            },
            qwen: {
                endpoint: 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer YOUR_QWEN_API_KEY' // Replace with your key
                },
                format: 'openai',
                model: 'qwen-max',
                description: 'Strong Chinese/English support'
            },
            gpt4: {
                endpoint: 'https://api.openai.com/v1/chat/completions',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer YOUR_OPENAI_API_KEY' // Replace with your key
                },
                format: 'openai',
                model: 'gpt-4o',
                description: 'Industry standard'
            }
        };
    </script>
    
    <script>
        const messagesDiv = document.getElementById('messages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const queryBtns = document.querySelectorAll('.query-btn');
        const printBtn = document.getElementById('printBtn');
        const pdfBtn = document.getElementById('pdfBtn');
        const clearBtn = document.getElementById('clearBtn');

        let conversationHistory = [];

        // ============================================
        // MODAL FUNCTIONALITY
        // ============================================
        
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal(modal.id);
                }
            });
        });

        // Close modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    closeModal(modal.id);
                });
            }
        });

        // Footer link click handlers
        document.querySelectorAll('.footer-links a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const href = link.getAttribute('href');
                const modalMap = {
                    '#features': 'featuresModal',
                    '#news': 'newsModal',
                    '#faq': 'faqModal',
                    '#feedback': 'feedbackModal',
                    '#support': 'supportModal',
                    '#privacy': 'privacyModal',
                    '#disclaimer': 'disclaimerModal'
                };
                
                if (modalMap[href]) {
                    openModal(modalMap[href]);
                }
            });
        });

        // ============================================
        // EXISTING FUNCTIONALITY
        // ============================================

        // Print functionality
        printBtn.addEventListener('click', () => {
            updatePrintDate();
            window.print();
        });

        // Save as PDF functionality
        pdfBtn.addEventListener('click', () => {
            updatePrintDate();
            
            // Show user instruction
            const originalTitle = document.title;
            document.title = 'CA2013_Query_Response_' + getFormattedDate();
            
            // Trigger print dialog with PDF save option
            window.print();
            
            // Restore title after a delay
            setTimeout(() => {
                document.title = originalTitle;
            }, 1000);
        });

        // Clear conversation
        clearBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear the entire conversation? This cannot be undone.')) {
                conversationHistory = [];
                
                // Remove all messages except welcome message
                const welcomeMessage = messagesDiv.querySelector('.message.assistant');
                messagesDiv.innerHTML = '';
                
                // Re-add print header
                const printHeader = document.createElement('div');
                printHeader.className = 'print-only print-header';
                printHeader.innerHTML = `
                    <h1>üèõÔ∏è Companies Act 2013 Reference Tool</h1>
                    <p>Query & Response Report</p>
                    <p id="printDate"></p>
                `;
                messagesDiv.appendChild(printHeader);
                
                // Re-add welcome message
                if (welcomeMessage) {
                    messagesDiv.appendChild(welcomeMessage.cloneNode(true));
                }
                
                // Re-add print footer
                const printFooter = document.createElement('div');
                printFooter.className = 'print-only print-footer';
                printFooter.innerHTML = `
                    <p><strong>‚öñÔ∏è Legal Disclaimer:</strong></p>
                    <p>This document is for informational purposes only and does NOT constitute legal advice. The information provided should not be relied upon as a substitute for professional legal counsel. Always consult with a qualified legal professional for specific legal matters.</p>
                    <p><strong>Third-Party Content:</strong> Information sourced from ca2013.com (third-party website). Not affiliated with or endorsed by ca2013.com.</p>
                    <p><strong>Accuracy:</strong> Laws and regulations change frequently. Verify all information independently before relying on it.</p>
                `;
                messagesDiv.appendChild(printFooter);
            }
        });

        // Helper function to update print date
        function updatePrintDate() {
            const printDateElement = document.getElementById('printDate');
            if (printDateElement) {
                const now = new Date();
                printDateElement.textContent = `Generated on: ${now.toLocaleString('en-IN', {
                    dateStyle: 'full',
                    timeStyle: 'short',
                    timeZone: 'Asia/Kolkata'
                })}`;
            }
        }

        // Helper function to get formatted date for filename
        function getFormattedDate() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            return `${year}${month}${day}_${hours}${minutes}`;
        }

        // Handle send button
        sendBtn.addEventListener('click', handleSend);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSend();
        });

        // Handle quick query buttons
        queryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                userInput.value = btn.dataset.query;
                handleSend();
            });
        });

        async function handleSend() {
            const query = userInput.value.trim();
            if (!query) return;

            // Disable input
            userInput.disabled = true;
            sendBtn.disabled = true;

            // Add user message
            addMessage('user', query);
            userInput.value = '';

            // Show loading
            const loadingId = showLoading();

            try {
                // Search ca2013.com first
                const searchResults = await searchCA2013(query);
                
                // Get AI response with context
                const response = await getAIResponse(query, searchResults);
                
                // Remove loading and show response
                removeLoading(loadingId);
                addMessage('assistant', response.content, response.sources);

            } catch (error) {
                removeLoading(loadingId);
                addMessage('assistant', `<div class="error">Sorry, I encountered an error: ${error.message}</div>`);
            } finally {
                userInput.disabled = false;
                sendBtn.disabled = false;
                userInput.focus();
            }
        }

        async function searchCA2013(query) {
            // Use web_fetch to get content from ca2013.com
            const searchUrl = `https://ca2013.com/?s=${encodeURIComponent(query)}`;
            
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        messages: [{
                            role: 'user',
                            content: `Search ca2013.com for: "${query}". Extract the most relevant sections, rules, or provisions found. Return ONLY a JSON object with this structure: {"found": true/false, "sections": ["Section X: description"], "url": "search_url"}. If nothing found, set found to false.`
                        }],
                        tools: [{
                            type: "web_search_20250305",
                            name: "web_search"
                        }]
                    })
                });

                const data = await response.json();
                
                // Parse the response
                if (data.content && data.content.length > 0) {
                    const textContent = data.content.find(c => c.type === 'text');
                    if (textContent) {
                        try {
                            const cleanText = textContent.text.replace(/```json\n?|\n?```/g, '').trim();
                            return JSON.parse(cleanText);
                        } catch {
                            return { found: false, sections: [], url: searchUrl };
                        }
                    }
                }
                
                return { found: false, sections: [], url: searchUrl };
            } catch (error) {
                console.error('Search error:', error);
                return { found: false, sections: [], url: searchUrl };
            }
        }

        async function getAIResponse(query, searchResults) {
            // Get selected model configuration
            const selectedModel = document.getElementById('modelSelect').value;
            const config = MODEL_CONFIGS[selectedModel];
            
            const systemPrompt = `You are "The Statutory Analyst" - a Senior Corporate Counsel and Statutory Interpretation Engine specializing in Indian corporate and securities law.

ROLE & EXPERTISE:
You provide precise, legally grounded interpretations of statutes including The Companies Act 2013, LLP Act, SEBI Regulations, and related subordinate legislation. You have access to information from ca2013.com, a third-party website.

CORE DIRECTIVES (STRICTLY FOLLOW):

1. TEXTUAL SUPREMACY
   - Begin ALL interpretations with the literal text of the provision
   - NEVER ignore "Provisos" or "Explanations" - they are integral to the section
   - Quote exact statutory language when explaining provisions

2. NON-OBSTANTE RULE
   - Identify sections starting with "Notwithstanding anything contained in..."
   - Explicitly state which sections/provisions it overrides
   - Explain the scope and extent of the override

3. MANDATORY vs DIRECTORY
   - "Shall" = Mandatory (strict compliance required)
   - "May" = Discretionary (permissive, not obligatory)
   - Clearly distinguish and state the legal consequence of non-compliance

4. DEEMING FICTIONS
   - Identify phrases like "shall be deemed to be", "shall be treated as"
   - Explain the legal fiction being created
   - State what would otherwise be the natural legal position

5. HIERARCHY OF AUTHORITY
   - Prioritize: The Act > Rules > Notifications/Circulars > Case Law
   - When citing, specify the source and its hierarchical position
   - Note if subordinate legislation exceeds parent statute

MANDATORY OUTPUT STRUCTURE:

For every statutory query, provide:

**üìú Statutory Provision**
[Quote the exact text of the relevant section/rule]

**‚öñÔ∏è The Core Rule**
[The primary mandate in plain English - what the law requires/permits/prohibits]

**‚ö†Ô∏è The "Unless" Factor (Exceptions)**
- List ALL Provisos (Provided that...)
- List ALL Explanations
- State any exemptions or carve-outs
- Note: "No exceptions apply" if none exist

**üîó Inter-connectivity**
- Related sections that must be read together
- Applicable Rules (e.g., "Read with Rule 11 of Companies (Management and Administration) Rules, 2014")
- Cross-references to notifications, circulars, or amendments

**‚úÖ Compliance Trigger**
- Specific thresholds (e.g., "Applies if Paid-up Capital ‚â• ‚Çπ10 Crore")
- Conditions precedent for applicability
- Timeline/deadline requirements
- Who must comply (e.g., "All listed companies" vs "Private companies with turnover > ‚Çπ250 Cr")

**‚öñÔ∏è Judicial Interpretation (if applicable)**
- Cite landmark judgments that clarify the provision
- Note any ambiguity requiring judicial interpretation
- State: "The provision is subject to judicial interpretation" if ambiguous

CRITICAL CONSTRAINTS:

‚ùå NEVER provide summaries that omit "Provided that" clauses
‚ùå NEVER ignore Explanations or sub-clauses
‚ùå NEVER interpret "Shall" as discretionary
‚ùå NEVER cite case law that contradicts statutory text
‚ùå NEVER assume provisions - always verify from source

‚úÖ ALWAYS state when a provision has been amended (mention notification/date)
‚úÖ ALWAYS distinguish between pre- and post-amendment positions if relevant
‚úÖ ALWAYS mention if a provision is under challenge/stayed by courts
‚úÖ ALWAYS cite specific sub-sections and clauses (e.g., "Section 135(5)(b)")

IMPORTANT DISCLAIMERS:
- This analysis is for informational purposes only and does NOT constitute legal advice
- Users must consult qualified legal professionals for specific legal matters
- Information is sourced from ca2013.com (third-party website)
- Laws and regulations change frequently - verify independently
- This is educational statutory interpretation, not legal counsel

INTERPRETATION PRINCIPLES (Indian Law):
- Literal Rule: Plain meaning of words takes precedence
- Golden Rule: Modify literal meaning only to avoid absurdity
- Mischief Rule: Consider the defect/mischief the law intended to remedy
- Harmonious Construction: Reconcile conflicting provisions
- Purposive Interpretation: Read provisions to advance the statute's object
- Beneficial Construction: Social welfare legislation construed liberally

Search Results from ca2013.com:
${JSON.stringify(searchResults, null, 2)}

Remember: You are a statutory interpretation engine, not a business advisor. Focus on "what the law says" not "what you should do." Let users consult their counsel for application to specific facts.`;

            conversationHistory.push({
                role: 'user',
                content: query
            });

            let requestBody, endpoint;

            // Format request based on provider
            switch (config.format) {
                case 'anthropic':
                    endpoint = config.endpoint;
                    requestBody = {
                        model: config.model,
                        max_tokens: 2000,
                        system: systemPrompt,
                        messages: conversationHistory
                    };
                    break;

                case 'openai': // Used by DeepSeek, Qwen, OpenAI
                    endpoint = config.endpoint;
                    requestBody = {
                        model: config.model,
                        max_tokens: 2000,
                        temperature: 0.7,
                        messages: [
                            { role: 'system', content: systemPrompt },
                            ...conversationHistory
                        ]
                    };
                    break;

                case 'gemini':
                    endpoint = `${config.endpoint}?key=${config.apiKey}`;
                    const geminiMessages = conversationHistory.map(msg => ({
                        role: msg.role === 'assistant' ? 'model' : 'user',
                        parts: [{ text: msg.content }]
                    }));
                    requestBody = {
                        system_instruction: { parts: [{ text: systemPrompt }] },
                        contents: geminiMessages,
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 2000
                        }
                    };
                    break;
            }

            // Make API call
            const response = await fetch(endpoint, {
                method: 'POST',
                headers: config.headers,
                body: JSON.stringify(requestBody)
            });

            const data = await response.json();

            // Parse response based on provider
            let assistantMessage;
            switch (config.format) {
                case 'anthropic':
                    assistantMessage = data.content
                        .filter(c => c.type === 'text')
                        .map(c => c.text)
                        .join('\n');
                    break;

                case 'openai':
                    assistantMessage = data.choices[0].message.content;
                    break;

                case 'gemini':
                    assistantMessage = data.candidates[0].content.parts[0].text;
                    break;
            }

            conversationHistory.push({
                role: 'assistant',
                content: assistantMessage
            });

            return {
                content: formatResponse(assistantMessage),
                sources: searchResults.found ? [searchResults.url] : []
            };
        }

        function formatResponse(text) {
            // Convert markdown-style formatting to HTML
            text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
            text = text.replace(/\*([^*]+)\*/g, '<em>$1</em>');
            
            // Convert section references to bold
            text = text.replace(/Section (\d+[A-Z]*)/g, '<strong>Section $1</strong>');
            text = text.replace(/Rule (\d+[A-Z]*)/g, '<strong>Rule $1</strong>');
            
            // Highlight statutory structure markers with emoji
            text = text.replace(/üìú Statutory Provision/g, '<strong>üìú Statutory Provision</strong>');
            text = text.replace(/‚öñÔ∏è The Core Rule/g, '<strong>‚öñÔ∏è The Core Rule</strong>');
            text = text.replace(/‚ö†Ô∏è The "Unless" Factor/g, '<strong>‚ö†Ô∏è The "Unless" Factor (Exceptions)</strong>');
            text = text.replace(/üîó Inter-connectivity/g, '<strong>üîó Inter-connectivity</strong>');
            text = text.replace(/‚úÖ Compliance Trigger/g, '<strong>‚úÖ Compliance Trigger</strong>');
            text = text.replace(/‚öñÔ∏è Judicial Interpretation/g, '<strong>‚öñÔ∏è Judicial Interpretation</strong>');
            
            // Highlight legal terms
            text = text.replace(/\b(Provided that|Explanation|Notwithstanding|shall be deemed|Proviso)\b/g, '<strong style="color: #764ba2;">$1</strong>');
            text = text.replace(/\b(Shall|Must|Mandatory)\b/g, '<strong style="color: #d9534f;">$1</strong>');
            text = text.replace(/\b(May|Discretionary|Optional)\b/g, '<strong style="color: #5bc0de;">$1</strong>');
            
            // Split into paragraphs
            const paragraphs = text.split('\n\n').filter(p => p.trim());
            
            let html = '';
            for (const para of paragraphs) {
                if (para.match(/^#+\s/)) {
                    // Heading
                    const level = para.match(/^#+/)[0].length;
                    const content = para.replace(/^#+\s/, '');
                    html += `<h3>${content}</h3>`;
                } else if (para.match(/^[\d]+\./)) {
                    // Numbered list
                    const items = para.split('\n').filter(l => l.trim());
                    html += '<ol>';
                    items.forEach(item => {
                        const content = item.replace(/^[\d]+\.\s*/, '');
                        html += `<li>${content}</li>`;
                    });
                    html += '</ol>';
                } else if (para.match(/^[-*‚Ä¢]/)) {
                    // Bullet list
                    const items = para.split('\n').filter(l => l.trim());
                    html += '<ul>';
                    items.forEach(item => {
                        const content = item.replace(/^[-*‚Ä¢]\s*/, '');
                        html += `<li>${content}</li>`;
                    });
                    html += '</ul>';
                } else {
                    // Regular paragraph
                    html += `<p>${para}</p>`;
                }
            }
            
            return html;
        }

        function addMessage(role, content, sources = []) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            let messageContent = `<div class="message-content">${content}`;
            
            if (sources && sources.length > 0) {
                messageContent += '<div class="citation">';
                messageContent += 'üìö Sources: ';
                sources.forEach((source, idx) => {
                    messageContent += `<a href="${source}" target="_blank">ca2013.com</a>`;
                    if (idx < sources.length - 1) messageContent += ', ';
                });
                messageContent += '</div>';
            }
            
            messageContent += '</div>';
            messageDiv.innerHTML = messageContent;
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function showLoading() {
            const loadingDiv = document.createElement('div');
            const loadingId = 'loading-' + Date.now();
            loadingDiv.id = loadingId;
            loadingDiv.className = 'message assistant';
            loadingDiv.innerHTML = `
                <div class="message-content">
                    <div class="loading">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;
            messagesDiv.appendChild(loadingDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            return loadingId;
        }

        function removeLoading(loadingId) {
            const loadingDiv = document.getElementById(loadingId);
            if (loadingDiv) loadingDiv.remove();
        }
    </script>
</body>
</html>
